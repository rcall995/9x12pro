    /* Core card */
    .card{border-width:2px;border-radius:.75rem;padding:.85rem;text-align:center;font-weight:600;position:relative;display:flex;align-items:center;justify-content:center;user-select:none;animation:fadeIn .25s ease-in-out;outline-offset:2px;z-index:1;transition:transform .15s ease,box-shadow .15s ease,outline .15s ease}
    .card:hover{filter:brightness(.98)}
    .spot-label{position:absolute;top:6px;left:8px;font-size:.7rem;font-weight:700;opacity:.65}
    .status-badge{position:absolute;bottom:6px;right:8px;font-size:.7rem;padding:6px 10px;border-radius:9999px;background:rgba(255,255,255,.96);border:1px solid rgba(0,0,0,.06);color:#0f172a;font-weight:700;box-shadow:0 2px 6px rgba(0,0,0,.08)}
    .price-badge{position:absolute;top:6px;right:8px;font-size:.7rem;padding:4px 8px;border-radius:9999px;background:rgba(34,197,94,.92);color:white;font-weight:700;box-shadow:0 2px 6px rgba(34,197,94,.3)}
    .selected-pill{position:absolute;top:50%;right:8px;font-size:.65rem;padding:4px 8px;border-radius:9999px;background:rgba(59,130,246,.95);color:white;font-weight:700;box-shadow:0 6px 14px rgba(59,130,246,.12);transform:translateY(-50%)}
    .selected{outline:4px solid rgba(59,130,246,.95);box-shadow:0 18px 40px rgba(2,6,23,.25);transform:scale(1.01)}
    .banner{font-weight:800}
    .grid-front,.grid-back{
      display:grid;
      grid-template-columns:repeat(4,1fr);
      grid-template-rows:40fr 14fr 40fr;
      gap:.5rem;
      width:100%;
      box-sizing:border-box;
      aspect-ratio:12/9;
    }
    .col-span-2{grid-column:span 2 / span 2}
    .col-span-4{grid-column:span 4 / span 4}
    @keyframes fadeIn{from{opacity:0;transform:scale(.985)}to{opacity:1;transform:scale(1)}}
    /* KEEP 4-column layout and 12:9 aspect ratio on ALL screen sizes for proper postcard appearance */
    @media (max-width:900px){
        .card{min-height:80px;padding:0.75rem}
        .spot-label{font-size:.7rem;top:6px;left:8px}
        .status-badge{font-size:.7rem;padding:6px 10px;bottom:6px;right:8px}
    }
    @media (max-width:600px){
        .grid-front,.grid-back{gap:.35rem}
        .card{min-height:60px;padding:0.5rem;font-size:0.75rem}
        .spot-label{font-size:.65rem;top:4px;left:6px}
        .status-badge{font-size:.65rem;padding:4px 8px;bottom:4px;right:6px}
    }
    .modal-backdrop{position:fixed;inset:0;background:rgba(0,0,0,.35);display:none;align-items:center;justify-content:center;z-index:9999;padding:1rem}
    .modal{width:100%;max-width:560px;max-height:90vh;overflow-y:auto;background:#fff;border-radius:.75rem;border:1px solid #e5e7eb;box-shadow:0 20px 40px rgba(0,0,0,.18);padding:1rem}
    .modal.show{display:flex!important}
    @media (max-width:640px){
        .modal{max-height:95vh;border-radius:.5rem;padding:.75rem}
        .modal-backdrop{padding:.5rem}
    }

    /* Mobile Touch Optimization */
    @media (max-width: 768px) {
      /* Larger touch targets for buttons */
      button, .btn, input[type="button"], input[type="submit"] {
        min-height: 44px !important;
        min-width: 44px !important;
        padding: 12px 16px !important;
        font-size: 16px !important; /* Prevents iOS zoom on input focus */
      }

      /* Larger touch targets for checkboxes */
      input[type="checkbox"] {
        min-width: 24px !important;
        min-height: 24px !important;
      }

      /* Kanban columns stack vertically on mobile */
      .kanban-board {
        flex-direction: column !important;
        gap: 16px !important;
      }

      .kanban-column {
        width: 100% !important;
        min-width: 100% !important;
      }

      /* Larger drag handles on mobile */
      .kanban-item .drag-handle {
        padding-left: 32px !important;
        min-height: 44px !important;
        display: flex;
        align-items: center;
      }

      .kanban-item .drag-handle::before {
        font-size: 18px !important;
        left: 6px !important;
      }

      /* Better card spacing on mobile */
      .kanban-item {
        margin-bottom: 12px !important;
        padding: 12px !important;
      }

      /* Client cards responsive */
      .client-row {
        min-height: 180px !important;
      }

      /* Hide some labels on mobile, show icons only */
      .hide-on-mobile {
        display: none !important;
      }

      /* Single column grid on mobile */
      .grid-cols-1.md\\:grid-cols-2.lg\\:grid-cols-3 {
        grid-template-columns: 1fr !important;
      }

      /* Prospect pool cards */
      .prospect-card {
        padding: 12px !important;
      }

      /* Better modal sizing on mobile */
      .modal {
        max-width: 100% !important;
        margin: 8px !important;
      }

      /* Prevent horizontal scroll */
      body {
        overflow-x: hidden;
      }

      /* Improve form inputs on mobile */
      input[type="text"],
      input[type="email"],
      input[type="tel"],
      input[type="number"],
      select,
      textarea {
        font-size: 16px !important; /* Prevents iOS zoom */
        min-height: 44px !important;
      }
    }

    /* Tablet optimization */
    @media (min-width: 769px) and (max-width: 1024px) {
      .kanban-column {
        min-width: 280px !important;
      }

      .grid-cols-1.md\\:grid-cols-2.lg\\:grid-cols-3 {
        grid-template-columns: repeat(2, 1fr) !important;
      }
    }

    /* Smooth scrolling for better mobile UX */
    html {
      scroll-behavior: smooth;
    }

    /* Better touch feedback */
    button:active, .btn:active, .kanban-item:active {
      transform: scale(0.98);
      transition: transform 0.1s ease;
    }

    /* Pull-to-refresh hint */
    @media (max-width: 768px) {
      body {
        overscroll-behavior-y: contain;
      }
    }
    
    /* OVERLAY EDIT BUTTON - appears on top of selected card */
    .card-edit-overlay {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      z-index: 100;
      pointer-events: none;
      opacity: 0;
      transition: opacity 0.2s ease;
    }
    .card.selected .card-edit-overlay {
      opacity: 1;
      pointer-events: all;
    }
    .card-edit-overlay button {
      padding: 0.5rem 1rem;
      background: rgba(37, 99, 235, 0.95);
      color: white;
      border: none;
      border-radius: 0.5rem;
      font-weight: 700;
      box-shadow: 0 8px 18px rgba(37, 99, 235, 0.3);
      cursor: pointer;
      font-size: 0.875rem;
    }
    .card-edit-overlay button:hover {
      background: rgba(29, 78, 216, 0.95);
    }
    
    .toast{position:fixed;bottom:22px;right:22px;z-index:9999;padding:.6rem .9rem;border-radius:.6rem;color:#fff;box-shadow:0 10px 20px rgba(0,0,0,.2);font-size:14px;max-width:90vw}
    .toast-ok{background:#059669}.toast-warn{background:#b45309}
    @media (max-width: 768px) {
      .toast {
        bottom: 80px !important; /* Avoid overlapping with mobile nav if added */
        left: 50% !important;
        right: auto !important;
        transform: translateX(-50%);
        min-width: 200px;
        text-align: center;
        font-size: 16px !important;
        padding: 12px 20px !important;
      }
    }
    @media print{#legendArea,.toast{display:none!important}}
    #legendGrid{
      display:flex;
      gap:.6rem;
      align-items:center;
      justify-content:flex-start;
      flex-wrap:wrap;
      padding-top:.25rem;
      max-width:48rem;
    }
    .legend-item{display:flex;align-items:center;gap:.5rem;padding:.2rem .35rem;border-radius:.4rem;background:transparent}
    .legend-dot{width:10px;height:10px;border-radius:9999px;display:inline-block;flex:0 0 auto}
    .postcard {
      background: #000000;
      border: 1px solid #e5e7eb;
      border-radius: 0;
      padding: .75rem;
      box-shadow: 0 6px 18px rgba(0,0,0,.06);
      transition: background-color .15s ease, border-color .15s ease;
      position: relative;
      max-width: 100%;
    }
    .postcard .card { border-radius: .5rem; }

    /* Postcard Size Scaling - 6.5×12 is 72.2% of 9×12 height */
    .postcard.size-6x12 {
      transform: scaleY(0.722);
      transform-origin: top center;
    }

    /* Mobile Responsiveness - Fit within screen width */
    @media (max-width: 768px) {
      .side-wrap {
        width: 100%;
        overflow-x: visible;
        overflow-y: visible;
      }
      .postcard {
        width: 100%;
        max-width: 100%;
        margin: 0 auto;
        padding: 0.5rem;
      }
      /* Scale down the grid on mobile */
      .grid-front, .grid-back {
        font-size: 0.75rem;
        width: 100%;
      }
      /* Make cards more touch-friendly */
      .card {
        min-height: 70px;
        padding: 0.6rem;
        font-size: 0.75rem;
      }
      /* Adjust badges for mobile */
      .price-badge, .status-badge {
        font-size: 0.6rem;
        padding: 3px 6px;
      }
      .spot-label {
        font-size: 0.6rem;
      }
    }

    /* Extra small screens - iPhone */
    @media (max-width: 480px) {
      .postcard {
        padding: 0.35rem;
      }
      .grid-front, .grid-back {
        gap: 0.25rem;
        font-size: 0.65rem;
      }
      .card {
        min-height: 55px;
        padding: 0.4rem;
        font-size: 0.65rem;
      }
      .price-badge, .status-badge {
        font-size: 0.55rem;
        padding: 2px 5px;
      }
      .spot-label {
        font-size: 0.55rem;
      }
    }
    .placeholder {
        background: #fdfdfd;
        border: 1px dashed #d1d5db;
        color: #9ca3af;
        font-style: normal;
        font-weight: 500;
        opacity: 1;
    }
    .header-controls { display:flex; gap:.5rem; align-items:center; }
    .color-preview { width:18px; height:18px; border-radius:4px; border:1px solid #e5e7eb; display:inline-block; vertical-align:middle }
    .color-label { font-size:0.85rem; color:#374151; margin-right:4px }
    .banner-text {
      display: inline-block;
      font-weight: 800;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      font-size: clamp(1.2rem, 1.6vw + 1rem, 2rem);
      line-height: 1;
    }
    .sort-row{display:flex;align-items:center;justify-content:space-between;padding:8px;border-radius:6px;margin-bottom:6px;background:#fff;border:1px solid #eef2f7}
    .sort-controls button{padding:6px 8px;border-radius:6px;background:#f8fafc;border:1px solid #e6eef4;cursor:pointer}
    .tab-pane { padding-top: 0.5rem; }
    .tab-pane.hidden { display: none; }
    .tab-btn {
        border-color: transparent;
        color: #6b7280;
        padding: 0.5rem 1rem;
        transition: all 0.2s ease;
        border-radius: 0.375rem 0.375rem 0 0;
        margin-bottom: -2px;
        font-weight: 600;
    }
    .tab-btn:hover:not(.active) {
        color: #374151;
        background-color: #f3f4f6;
    }
    .tab-btn.active {
        border-bottom: 2px solid #4f46e5;
        color: #1f2937;
        background-color: white;
        box-shadow: 0 -2px 5px rgba(0,0,0,0.05);
    }
    @media (max-width: 768px) {
      .tab-btn {
        min-height: 48px !important;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 20px !important; /* Larger emoji icons on mobile */
      }
      .tab-btn.active {
        border-bottom: 3px solid #4f46e5 !important;
        transform: translateY(-2px);
      }
    }
    .dashboard-widget {
        background-color: white;
        border-radius: 0.5rem;
        padding: 1.5rem;
        box-shadow: 0 4px 6px rgba(0,0,0,0.05);
    }
    .metric-value {
        font-size: 2.25rem;
        font-weight: 700;
    }
    .metric-label {
        color: #6b7280;
        font-weight: 500;
    }
    .kanban-column {
        min-height: 150px;
        background-color: #f3f4f6;
        border-radius: 0.375rem;
        padding: 0.75rem;
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
        width: calc(25% - 0.75rem);  /* 4 equal columns */
        min-width: 220px;
        flex-shrink: 0;
    }
    #salesActivityContainer {
        /* Flex styles moved to inner wrapper div in renderKanban() */
    }
    @media (max-width: 1023px) {
        .kanban-column {
            width: calc(50% - 0.5rem);  /* 2 columns on tablets */
            min-width: 200px;
        }
    }
    @media (max-width: 640px) {
        .kanban-column {
            width: 100%;  /* 1 column on mobile */
            min-width: unset;
        }
    }
    .control-btn {
        background-color: white;
        color: #1f2937;
        font-weight: 700;
        border: 1px solid #d1d5db;
        box-shadow: 0 1px 2px rgba(0,0,0,0.05);
    }
    .control-btn:hover {
        background-color: #f3f4f6;
    }
    #legendContainer {
        display: flex;
        justify-content: flex-start;
        width: 100%;
        margin-bottom: 1rem;
    }
    .task-item {
        cursor: grab;
        padding: 0.5rem;
        border-radius: 0.375rem;
        background-color: #f8fafc;
        border: 1px solid #e2e8f0;
    }
    .task-item.dragging {
        opacity: 0.5;
        border: 1px dashed #4f46e5;
    }
    .kanban-item {
      transition: opacity 0.2s, transform 0.2s;
      user-select: none;
      -webkit-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
    }
    .kanban-item .drag-handle {
      cursor: grab !important;
      position: relative;
      padding-left: 24px; /* Make room for grip icon */
    }
    .kanban-item .drag-handle::before {
      content: '⋮⋮';
      position: absolute;
      left: 4px;
      top: 50%;
      transform: translateY(-50%);
      font-size: 14px;
      color: #9ca3af;
      letter-spacing: -2px;
      opacity: 0.6;
      transition: opacity 0.2s ease;
    }
    .kanban-item:hover .drag-handle::before {
      opacity: 1;
      color: #6366f1;
    }
    .kanban-item .drag-handle:active {
      cursor: grabbing !important;
    }
    .kanban-item.dragging {
      opacity: 0.5;
      cursor: grabbing !important;
      transform: rotate(3deg) scale(1.05);
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%) !important;
      color: white !important;
      box-shadow: 0 10px 30px rgba(102, 126, 234, 0.4) !important;
      border: 2px solid #4f46e5 !important;
      transition: all 0.2s ease;
      z-index: 1000;
    }
    .kanban-item.dragging * {
      color: white !important;
    }
    .kanban-item.dragging .drag-handle {
      cursor: grabbing !important;
    }
    .kanban-item.dragging .drag-handle::before {
      color: rgba(255,255,255,0.8);
    }
    .kanban-item.drag-over {
      border-top: 4px dashed #4f46e5 !important;
      padding-top: 8px;
      background: linear-gradient(to bottom, rgba(79, 70, 229, 0.1) 0%, transparent 100%) !important;
      animation: pulse-border 1s ease-in-out infinite;
    }
    @keyframes pulse-border {
      0%, 100% { border-top-color: #4f46e5; }
      50% { border-top-color: #818cf8; }
    }
    .kanban-column.drag-over-column {
      background: linear-gradient(180deg, rgba(79, 70, 229, 0.08) 0%, rgba(79, 70, 229, 0.02) 100%);
      border: 2px dashed #4f46e5 !important;
      border-radius: 12px;
      box-shadow: inset 0 0 0 2px rgba(79, 70, 229, 0.2);
      animation: column-glow 1.5s ease-in-out infinite;
    }
    @keyframes column-glow {
      0%, 100% { box-shadow: inset 0 0 0 2px rgba(79, 70, 229, 0.2), 0 0 20px rgba(79, 70, 229, 0.1); }
      50% { box-shadow: inset 0 0 0 2px rgba(79, 70, 229, 0.4), 0 0 30px rgba(79, 70, 229, 0.2); }
    }
    .card > div:not(.spot-label):not(.status-badge):not(.selected-pill):not(.price-badge):not(.card-edit-overlay) {
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
      width: 100%;
    }
    .task-row {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      padding: 0.5rem;
      background: white;
      border: 1px solid #e2e8f0;
      border-radius: 0.375rem;
      margin-bottom: 0.5rem;
      cursor: grab;
      transition: opacity 0.2s;
    }
    .task-row.dragging {
      opacity: 0.5;
      border: 1px dashed #4f46e5;
    }
    .task-row.drag-over {
      border-top: 3px solid #4f46e5 !important;
      padding-top: 4px;
    }
    .task-row.completed {
      opacity: 0.6;
    }
    .task-row.completed .task-text {
      text-decoration: line-through;
      color: #9ca3af;
    }
    .task-checkbox {
      width: 18px;
      height: 18px;
      cursor: pointer;
      flex-shrink: 0;
    }
    .task-text {
      flex: 1;
      margin-right: 1rem;
    }
    .task-date {
      font-size: 0.875rem;
      color: #6b7280;
      min-width: 120px;
    }
    .overdue { color: #dc2626; font-weight: bold; }
    #taskList {
      min-height: 200px;
    }
    
    /* Client row styles */
    .client-row {
      border: 1px solid #e5e7eb;
      border-radius: 0.5rem;
      padding: 0.75rem;
      margin-bottom: 0.5rem;
      cursor: pointer;
      transition: all 0.2s;
    }
    .client-row:hover {
      background-color: #f9fafb;
      border-color: #d1d5db;
      box-shadow: 0 2px 4px rgba(0,0,0,0.05);
    }

    /* Command Center Tab Styles */
    .cc-tab-content {
      display: block;
    }
    .cc-tab-content.hidden {
      display: none;
    }
